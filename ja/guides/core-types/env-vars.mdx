---
- title: 環境変数
- description: 環境変数を使用して実行時にWeaveの動作を設定する
---

Weaveは、その動作を設定および最適化するための環境変数セットを提供します。これらの変数をシェルまたはスクリプト内で設定して、特定の機能を制御できます。

```bash
# Example of setting environment variables in the shell
export WEAVE_PARALLELISM=10  # Controls the number of parallel workers
export WEAVE_PRINT_CALL_LINK=false  # Disables call link output
```

```python
# Example of setting environment variables in Python
import os

os.environ["WEAVE_PARALLELISM"] = "10"
os.environ["WEAVE_PRINT_CALL_LINK"] = "false"
```

## 利用可能な環境変数

| 変数                              | タイプ      | デフォルト        | 説明                                                                                                                                                                        |
| ------------------------------- | -------- | ------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `WANDB_API_KEY`                 | `string` | `None`       | 設定すると、APIキーの入力を求められることなく、W\&B Weaveに自動的にログインします。APIキーを生成するには、W\&Bアカウントにログインして [https://wandb.ai/authorize](https://wandb.ai/authorize) に移動してください。                         |
| `WEAVE_DISABLED`                | `bool`   | `false`      | 設定値が `true` の場合、すべてのWeaveトレースを無効にします。Weave opsは通常の関数のように動作します。                                                                                                            |
| `WEAVE_PRINT_CALL_LINK`         | `bool`   | `true`       | Weave opを呼び出す際にWeave UIへのリンクを表示するかどうかを制御します。                                                                                                                              |
| `WEAVE_LOG_LEVEL`               | `str`    | `INFO`       | weaveロガーのログレベルを制御します。                                                                                                                                                     |
| `WEAVE_CAPTURE_CODE`            | `bool`   | `true`       | 後で使用するためにリロードできるように、opsのコードを保存するかどうかを制御します。                                                                                                                               |
| `WEAVE_DEBUG_HTTP`              | `bool`   | `false`      | 設定値が `true` の場合、デバッグ用のHTTPリクエストとレスポンスのログ記録をオンにします。                                                                                                                        |
| `WEAVE_PARALLELISM`             | `int`    | `20`         | 評価において、並行して評価する例の数を制御します。`1` に設定すると、例を順次実行します。                                                                                                                            |
| `WEAVE_TRACE_LANGCHAIN`         | `bool`   | `true`       | LangChainのグローバルトレースを制御します。`false` に設定すると、LangChainトレースを明示的に無効にします。                                                                                                        |
| `WEAVE_USE_SERVER_CACHE`        | `bool`   | `true`       | サーバーレスポンスのキャッシングを有効にします。有効にすると、サーバーからのレスポンスがディスクにキャッシュされ、繰り返しのクエリのパフォーマンスが向上します。                                                                                          |
| `WEAVE_SERVER_CACHE_SIZE_LIMIT` | `int`    | `1000000000` | サーバーキャッシュの最大サイズ制限をバイト単位で設定します。キャッシュがこのサイズに達すると、古いエントリが自動的に削除され、新しいエントリのためのスペースが確保されます。重要：基盤となる実装はSQLiteを使用しており、この設定に関係なく先行書き込みログ（WAL）が4MBまで成長します。このWALはプログラムが終了すると削除されます。 |
| `WEAVE_SERVER_CACHE_DIR`        | `str`    | `None`       | キャッシュファイルを保存するディレクトリを指定します。設定されていない場合、一時ディレクトリが使用されます。                                                                                                                    |
| `WEAVE_MAX_CALLS_QUEUE_SIZE`    | `int`    | `100000`     | コールキューの最大サイズを設定します。デフォルトは100,000です。値を0に設定すると、キューは無制限に成長できます。                                                                                                              |
| `WEAVE_RETRY_MAX_ATTEMPTS`      | `int`    | `3`          | 失敗したリクエストの最大再試行回数を設定します。                                                                                                                                                  |
| `WEAVE_RETRY_MAX_INTERVAL`      | `float`  | `300.0`      | 再試行の間隔の最大値を秒単位で設定します。                                                                                                                                                     |
| `WANDB_BASE_URL`                | `string` | `None`       | WeaveホストのURLを設定します。`wandb.login()`でプロンプトが表示されたときにホストURLを入力するのと同じです。`WANDB_BASE_URL`と`WANDB_API_KEY`を使用する前に`weave.init()`を指定して、Weaveに自動的にログインして認証することができます。                |

<Note>
  すべてのブール型環境変数は以下の値を受け付けます（大文字小文字は区別しません）：

  * `true`、`1`、`yes`、`on`はTrueを表します
  * `false`、`0`、`no`、`off`はFalseを表します
</Note>
