---
- title: トレースビューをナビゲートする
- description: LLMとエージェントアプリの複雑な実行パスを理解する
---

Weave Traceビューは、LLMやエージェントアプリの複雑な実行パスを理解するのに役立つように設計されています。何十もの入れ子になった呼び出しを持つエージェントアプリをデバッグする場合でも、単一のモデル予測のフローを追跡する場合でも、Traceビューは明確な内訳を提供し、アプリケーションフローを表示して理解するための代替方法も提供します。

このガイドでは、トレーススタックの移動、オペレーションのフィルタリングと検索、視覚的表現の切り替えなどについて説明します。

## はじめに

Traceビューに入るには：

1. **Traces**タブに移動します。
2. 任意のトレースをクリックしてTraceビューを開きます。Traceビューがポップアウトし、トレース実行の階層的な内訳が表示されます。

## Tracesページの概要

Tracesページは3つの主要パネルで構成されています：

* *左サイドバー*：プロジェクトのすべてのトレース実行のソート可能なページ分割リスト。
* *中央パネル*：インタラクティブな[トレースビュー](#trace-view-navigation)で、選択したトレースのスタックとオペレーション階層を表示します。
* *右パネル*：選択したオペレーション（Call、Code、Feedback、Scores、Summary、Use）の詳細ビュー。

![Trace page panels](imgs/trace-tree-full.png)

## トレースビューのナビゲーション

* *パンくずリスト*：中央パネルの上部で、パンくずリストを通じてトレーススタックを上下に移動します。
* *スタック矢印*：`↑`および`↓`ボタンを使用してスタックを上下に移動します。
* *ダブルクリック*：オペレーションをダブルクリックすると、そのサブスタックのみに表示を絞り込みます。
* *「トップに戻る」ボタン*：トレーススタックのルートに戻ります。

### フィルタリングと検索

* *オペレーション名でフィルタリング*：トレースツリーの上にある入力バーを使用して、特定のタイプのオペレーションを検索します（例：`tool`、`openai.response.create`）。
* *フィルター持続性*：トレース間でオペレーションを選択すると、比較しやすいようにサブパスのコンテキストが保持されます。

![Filter an op by name](imgs/trace-tree-filter.png)

### スクラバーとコンテキストナビゲーション

ツリーの下のパネルには、呼び出し間を移動するための複数のスクラバーが含まれています：

* **タイムライン**：イベントの時系列順。
* **ピア**：同じタイプを共有するオペレーション。
* **兄弟**：同じ親を持つオペレーション。
* **スタック**：コールスタックを上下に移動します。

利用可能なスクラバーを表示するには、パネル下部&#x306E;**^**&#x30DC;タンをクリックします。

各スクラバーにはスライダー&#x3068;**>**&#x30B8;ャンプボタンがあり、ステップバイステップで移動できます。

![Trace panel scrubbers](imgs/trace-tree-scrubbers.png)

### 代替トレースツリービュー

ニーズに応じてトレースツリーの複数の視覚的表現を切り替えることができます。代替トレースビューに切り替えるには、右上隅にある利用可能なオプション（デフォルトトレースビュー、コード構成、フレームグラフ、グラフビュー）のいずれかをクリックします

#### トレース（デフォルト）

スタック階層、オペレーションごとのコスト、実行時間、ステータスインジケーターを表示するデフォルトビュー。

#### コードビュー

コードビューでは、ボックスがオペレーションとそのネストされた呼び出しを表します。これは関数呼び出しのフローを視覚化するのに役立ちます。このビューでは、ボックスをクリックしてそのオペレーションを詳しく調べ、呼び出しパスをフィルタリングできます。

![Trace panel code view](imgs/trace-tree-code-view.png)

#### フレームグラフ

フレームグラフビューは、実行の深さと期間をタイムラインベースで視覚化します。これはパフォーマンス診断を時間経過で理解しようとする際に役立ちます。フレームをクリックしてサブトレースを分離できます。

![Trace panel flame graph](imgs/trace-tree-flame-view.png)

#### グラフビュー

グラフビューはオペレーション間の階層関係を示します。これは親子関係を理解するのに役立ちます。

## 使用上のヒントとコツ

* トレースツリービューの上部にあ&#x308B;**"オペレーション名でフィルタリング"**&#x691C;索バーを使用して、関連するツールやLLM呼び出しをすばやく分離します。
* デバッグのニーズに基づいてビューを切り替えます。呼び出しロジックには**コードビュー**を、**フレームグラフ**は時間経過に伴うパフォーマンスを理解するために、**グラフビュー**は構造を理解するために使用します。
